# Конвертер Цветовых Пространств (OpenCV C++)

Интерактивное приложение на C++ с использованием OpenCV для преобразования и визуализации цветов между моделями RGB, HSV и CMYK.

---

## Возможности

- Интерактивные ползунки (trackbars) для всех каналов: R, G, B, H, S, V, C, M, Y, K.  
- Динамическая палитра H–S, зависящая от текущего значения V (яркости). Клик по палитре устанавливает тон и насыщенность.  
- Превью цвета с накладываемым текстом (RGB / HSV / CMYK). Текст автоматически инвертируется (чёрный/белый) для контраста.  
- Ручной ввод значений через клавиатуру (форматы описаны ниже).  
- Кроссплатформенная сборка через CMake.

---

## Диапазоны значений (UI)

- RGB: R, G, B — 0 … 255  
- HSV (человеческий формат): H — 0 … 360 (конвертируется в 0…179 для OpenCV), S — 0 … 100 (%), V — 0 … 100 (%)  
- CMYK: C, M, Y, K — 0 … 100 (%)

Примечание: внутри приложения HSV хранится в формате OpenCV (H: 0–179, S/V: 0–255). В UI отображается H в градусах (0–360) и S/V в процентах (0–100).

---

## Управление (горячие клавиши)

- `r` / `R` — ручной ввод RGB: формат `R,G,B` (например `255,0,0`)  
- `h` / `H` — ручной ввод HSV: формат `H,S,V` (например `360,100,100`)  
- `c` / `C` — ручной ввод CMYK: формат `C,M,Y,K` (например `0,100,100,0`)  
- ESC — выйти или отменить ввод  
- Клик левой кнопкой мыши по палитре H–S — задать H и S

---

## Сборка и запуск

1. Установите зависимости (Ubuntu/Debian):
   sudo apt update
   sudo apt install -y build-essential cmake libopencv-dev pkg-config

2. Рекомендованный способ сборки в каталоге `lab1`:
   mkdir -p build
   cd build
   cmake .. -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
   cmake --build . -- -j$(nproc)

   После успешной сборки исполняемый файл будет:
   ./ColorModelConverter

3. Если OpenCV установлен в нестандартном каталоге, укажите путь к OpenCVConfig.cmake:
   cmake .. -DOpenCV_DIR=/path/to/opencv/lib/cmake/opencv4

---

## Проблемы и отладка

- Ошибка "opencv2/opencv.hpp: No such file or directory":
  - Убедитесь, что пакет `libopencv-dev` установлен.
  - Если OpenCV собран вручную и установлен в `/usr/local`, укажите `-DOpenCV_DIR=/usr/local/lib/cmake/opencv4`.
  - В некоторых системах заголовки находятся в `/usr/include/opencv4` — CMake обычно находит их через `find_package(OpenCV)`. В крайнем случае добавьте `-I/usr/include/opencv4` в CXX_FLAGS или поправьте CMakeLists.

- Если trackbars не реагируют или поведение плавает:
  - Убедитесь, что сборка использует тот же исполняемый файл, который вы запускаете (иногда IDE запускает старую сборку).
  - При отладке UI полезно генерировать `compile_commands.json` (CMake опция `CMAKE_EXPORT_COMPILE_COMMANDS=ON`) — это помогает редакторам (VS Code) найти заголовки и корректно разрешать include-пути.

---

## Советы для VS Code

- Установите расширение CMake Tools и настройте `cmake.configureSettings` или укажите `OpenCV_DIR` в настройках конфигурации, если CMake не находит OpenCV автоматически.  
- Сгенерируйте `compile_commands.json` (см. флаг `CMAKE_EXPORT_COMPILE_COMMANDS`) — это необходимо для автодополнения и перехода к определениям.

---
