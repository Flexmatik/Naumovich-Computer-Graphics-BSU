# Пояснения к бонусным заданиям

## 1. Реализация алгоритма Кастла-Питвея
**Алгоритм Кастла-Питвея (Castle-Pitteway)** — это структурный (лингвистический) метод растеризации отрезка. В отличие от арифметического подхода Брезенхема, этот алгоритм рассматривает линию как последовательность символов (паттерн).

### Принцип работы:
Алгоритм базируется на идее, схожей с **алгоритмом Евклида** для нахождения НОД.
Представим движение из точки A в B на дискретной сетке (для случая $0 \le dy \le dx$). Возможны два типа шагов:
* **`s` (simple):** Шаг только по основной оси (например, $x+1, y$).
* **`d` (diagonal):** Шаг по диагонали ($x+1, y+1$).

### Логика (как в коде):
1.  Пусть ширина $a = dx$, высота $b = dy$.
2.  Вводим переменные $x = a - b$ и $y = b$.
3.  Инициализируем две строки (части паттерна): $m_1 = "s"$, $m_2 = "d"$.
4.  Выполняем цикл редукции (аналог вычитания в алгоритме Евклида):
    * Если $x > y$: количество шагов типа $s$ доминирует. Мы "склеиваем" шаг $s$ с концом текущего паттерна $d$.
        $$x = x - y; \quad m_2 = m_1 + m_2$$
    * Иначе: диагональные шаги внедряются в прямые.
        $$y = y - x; \quad m_1 = m_2 + m_1$$
5.  Полученная строка-паттерн повторяется необходимое количество раз для отрисовки всей линии.

**Почему это интересно?** Это демонстрирует связь компьютерной графики с теорией чисел и грамматиками, хотя практическая эффективность низка из-за работы со строками.

---

## 2. Визуализация сглаженных линий (Алгоритм Ву)
**Сглаживание (Anti-aliasing)** — это метод устранения эффекта "лесенки" (зубчатости) на наклонных линиях.

### Принцип работы Алгоритма Ву (Xiaolin Wu):
В отличие от Брезенхема, который закрашивает *один* ближайший пиксель полностью (бинарный подход: 0 или 1), алгоритм Ву рассматривает линию как имеющую толщину.

На каждом шаге $x$ вычисляется точная вещественная координата $y$. Пиксель не может быть на дробной позиции, поэтому алгоритм закрашивает **два** соседних пикселя по вертикали:
1.  `floor(y)` (верхний пиксель).
2.  `floor(y) + 1` (нижний пиксель).

### Расчет яркости:
Интенсивность (прозрачность) распределяется обратно пропорционально расстоянию от центра пикселя до идеальной линии:
* Если линия проходит через $Y = 4.1$:
    * Пиксель 4 получает $90\%$ яркости (ближе).
    * Пиксель 5 получает $10\%$ яркости (дальше).

$$Intensity_{up} = 1 - \{y\}$$
$$Intensity_{down} = \{y\}$$
*(где $\{y\}$ — дробная часть)*

Визуально глаз усредняет эти значения, и линия кажется идеально прямой и гладкой.